# Docker Wordpress
Wordpressのファイルを触る必要がある場合、既存サイトの改修等の場合に使用します。

## 使いかた
### ソースファイルの設置
`wordpress/`内にWordPressを設置しているので、新規の場合はこれが使えます(v5.1.1)
既存サイト改修等の場合は、ソースを上書きして下さい。

### 環境変数の設定
ブラウザからのアクセスポートの管理を`.env`ファイルで行っています。
`.env-sample` を `.env` にリネームし、`VIRTUAL_PORT`を任意のポートの変更して下さい。
`8080`で問題なければそのままで大丈夫です。

### データベース初期化のためのファイル設置(既存サイト改修等であれば)
`db/initilize/`に`initail.sql` 等のSQLファイルを入れます。
初回起動時に`initial.sql`からデータベースを構築してくれます。

`wp-config.php`へは、データベース名、ユーザー名、パスワードまでは`initial.sql`の値を入力し、ホストには`mysql`と入力して下さい。

永続化のため、`db/local`にデータベースの内容がファイルとして作成されます。

### 環境変数の設定とwp-config.phpの設定(新規構築の場合)
新規で制作する場合は、中身のMYSQL... を任意の値に変更します。
この条件で、データベース、ユーザーが起動時に作成されます。

次に、`wordpress/wp-config-default.php`を`wordpress/wp-config.php`にリネームし、データベースの情報部分に`.env`と同じ値を入力することでWordPressがデータベースにアクセスできるようになります。

`wp-config.php`の設定を省略しても、起動後ブラウザから設定できます。
ブラウザから設定する際は、データベースのホスト欄に`mysql`と入力してください。

### docker-composeでイメージをビルド
`docker-compose up -d`で各コンテナが起動します。
起動したら、ブラウザから`localhost:8080`でアクセスできます。


## phpMyAdminについて
`localhost:8888`にアクセスすることでphpMyAdminに繋がります。